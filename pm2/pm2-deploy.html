<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>pm2部署笔记 | 马成的日志</title>
    <meta name="description" content="马成的日志">
    
    
    <link rel="preload" href="/assets/css/0.styles.3edbc46a.css" as="style"><link rel="preload" href="/assets/js/app.a9ab212a.js" as="script"><link rel="preload" href="/assets/js/2.4514bd47.js" as="script"><link rel="preload" href="/assets/js/4.e0a7a5e6.js" as="script"><link rel="prefetch" href="/assets/js/10.6dedf7e5.js"><link rel="prefetch" href="/assets/js/11.45516bfc.js"><link rel="prefetch" href="/assets/js/12.11bce665.js"><link rel="prefetch" href="/assets/js/13.4449a1d2.js"><link rel="prefetch" href="/assets/js/14.b4c9bd9c.js"><link rel="prefetch" href="/assets/js/15.f619b43f.js"><link rel="prefetch" href="/assets/js/16.22cce3cf.js"><link rel="prefetch" href="/assets/js/17.e85694af.js"><link rel="prefetch" href="/assets/js/18.d16027c1.js"><link rel="prefetch" href="/assets/js/19.7fe78433.js"><link rel="prefetch" href="/assets/js/20.4931d07d.js"><link rel="prefetch" href="/assets/js/21.94bf61f1.js"><link rel="prefetch" href="/assets/js/22.35704660.js"><link rel="prefetch" href="/assets/js/23.f1ed7643.js"><link rel="prefetch" href="/assets/js/24.ff2801e8.js"><link rel="prefetch" href="/assets/js/25.c3d801cc.js"><link rel="prefetch" href="/assets/js/26.a3e6d133.js"><link rel="prefetch" href="/assets/js/27.432939de.js"><link rel="prefetch" href="/assets/js/28.f1460489.js"><link rel="prefetch" href="/assets/js/29.4eb2a704.js"><link rel="prefetch" href="/assets/js/3.bcd1ae82.js"><link rel="prefetch" href="/assets/js/30.b04eb895.js"><link rel="prefetch" href="/assets/js/31.93bfa56a.js"><link rel="prefetch" href="/assets/js/32.5cb6ba10.js"><link rel="prefetch" href="/assets/js/33.ae16d7ba.js"><link rel="prefetch" href="/assets/js/34.aaa226d3.js"><link rel="prefetch" href="/assets/js/35.c863814a.js"><link rel="prefetch" href="/assets/js/36.35ae20fd.js"><link rel="prefetch" href="/assets/js/37.a7da877f.js"><link rel="prefetch" href="/assets/js/38.52e05500.js"><link rel="prefetch" href="/assets/js/39.4505410f.js"><link rel="prefetch" href="/assets/js/40.fb917143.js"><link rel="prefetch" href="/assets/js/41.5ec83de9.js"><link rel="prefetch" href="/assets/js/42.725572dd.js"><link rel="prefetch" href="/assets/js/43.d061c26d.js"><link rel="prefetch" href="/assets/js/44.df45f429.js"><link rel="prefetch" href="/assets/js/45.73541408.js"><link rel="prefetch" href="/assets/js/46.cf5996d0.js"><link rel="prefetch" href="/assets/js/5.63a71454.js"><link rel="prefetch" href="/assets/js/6.aa81e586.js"><link rel="prefetch" href="/assets/js/7.c158ba09.js"><link rel="prefetch" href="/assets/js/8.3639371a.js"><link rel="prefetch" href="/assets/js/9.b3d6674c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3edbc46a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">马成的日志</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div> <a href="https://github.com/macheng2017/article" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div> <a href="https://github.com/macheng2017/article" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>一些闪念</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>每日定投(TheDailyRegularInvesting)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>读书笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>pm2部署</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pm2/pm2-deploy.html" class="active sidebar-link">pm2部署笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pm2/pm2-deploy.html#以前部署项目的方式" class="sidebar-link">以前部署项目的方式</a></li><li class="sidebar-sub-header"><a href="/pm2/pm2-deploy.html#使用pm2以后的部署方式-当所有配置完成后三行命令" class="sidebar-link">使用pm2以后的部署方式,当所有配置完成后三行命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pm2/pm2-deploy.html#增加一个新功能后者一行代码-2" class="sidebar-link">增加一个新功能后者一行代码</a></li><li class="sidebar-sub-header"><a href="/pm2/pm2-deploy.html#在本地和服务器创建密钥" class="sidebar-link">在本地和服务器创建密钥</a></li><li class="sidebar-sub-header"><a href="/pm2/pm2-deploy.html#_1-先在本地创建-ssh-key" class="sidebar-link">1. 先在本地创建 ssh key</a></li><li class="sidebar-sub-header"><a href="/pm2/pm2-deploy.html#_2-将ssh-key-加入代理" class="sidebar-link">2. 将ssh key 加入代理</a></li><li class="sidebar-sub-header"><a href="/pm2/pm2-deploy.html#_3-将公钥添加到github上" class="sidebar-link">3. 将公钥添加到github上</a></li><li class="sidebar-sub-header"><a href="/pm2/pm2-deploy.html#_4-测试下是否配置成功" class="sidebar-link">4. 测试下是否配置成功</a></li><li class="sidebar-sub-header"><a href="/pm2/pm2-deploy.html#服务器上的操作和本地一样-在子账号下使用如下命令-不要在root账户下操作" class="sidebar-link">服务器上的操作和本地一样,在子账号下使用如下命令,不要在root账户下操作</a></li><li class="sidebar-sub-header"><a href="/pm2/pm2-deploy.html#打通服务器与github上的ssh-key的链接" class="sidebar-link">打通服务器与github上的ssh key的链接</a></li></ul></li><li class="sidebar-sub-header"><a href="/pm2/pm2-deploy.html#接下来就是配置node-pm2-了" class="sidebar-link">接下来就是配置node pm2 了</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue学习笔记</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="pm2部署笔记"><a href="#pm2部署笔记" class="header-anchor">#</a> pm2部署笔记</h1> <blockquote><blockquote><p>为什么要用pm2?</p></blockquote></blockquote> <h2 id="以前部署项目的方式"><a href="#以前部署项目的方式" class="header-anchor">#</a> 以前部署项目的方式</h2> <blockquote><ol><li><p>从github上下载</p></li> <li><p>打包后通过ssh 或者FTP上传到服务器,</p></li> <li><p>在服务器上找到并解压缩,放到相应的文件夹</p></li> <li><p>使用npm install 安装依赖 以及编译css 压缩js文件等等</p></li> <li><p>删除压缩包以及设置文件夹权限</p></li> <li><p>运行项目,如果报错</p></li> <li><p>切换文件夹查看日志文件</p></li> <li><p>在本地修改然后循环步骤2-7直到完美运行</p> <p>....</p></li></ol></blockquote> <h4 id="增加一个新功能后者一行代码"><a href="#增加一个新功能后者一行代码" class="header-anchor">#</a> 增加一个新功能后者一行代码</h4> <blockquote><pre><code>  重复1-8
</code></pre></blockquote> <h2 id="使用pm2以后的部署方式-当所有配置完成后三行命令"><a href="#使用pm2以后的部署方式-当所有配置完成后三行命令" class="header-anchor">#</a> 使用pm2以后的部署方式,当所有配置完成后三行命令</h2> <ol><li>git push                                                                  推送到github或者码云上</li> <li>pm2 deploy ecosystem.json production setup     第一次从github上拉取到服务器</li> <li>pm2 deploy ecosystem.json production               部署并运行 看到 success</li> <li>如果报错使用pm2 logs 重复1,3</li></ol> <h3 id="增加一个新功能后者一行代码-2"><a href="#增加一个新功能后者一行代码-2" class="header-anchor">#</a> 增加一个新功能后者一行代码</h3> <pre><code>1. git push 

   2. pm2 deploy ecosystem.json production 
</code></pre> <p>看到pm2 部署你的项目是不是很幸福,以前的工作方式简直是在透支生命啊，不到可以提高幸福指数，还可以拯救生命。</p> <p>步骤</p> <pre><code>1. 在服务器和本地创建密钥
2. 安装node.js pm2
3. 在github上建立仓库
4. 使用密钥配置服务器,本地,github三者无密码登录
5. 配置pm2 的部署配置文件
</code></pre> <p>提问提问提问</p> <pre><code>pm2最原始形态应该就是一个shell脚本，本来一个程序员2个小时就能完成的部署，他却花费20个小时研究出来一个自动化部署的脚本，然后上传到社区，参考xxx漫画
</code></pre> <h3 id="在本地和服务器创建密钥"><a href="#在本地和服务器创建密钥" class="header-anchor">#</a> 在本地和服务器创建密钥</h3> <pre><code>note: 
</code></pre> <ul><li><p>至于说ssh秘钥登录原理自行搜索,本文关注点在于实现步骤</p></li> <li><p>需要在本地电脑和服务器上装好git Bash(Mac系统没用过,好像不用get也行,反正有个终端能执行shell就行)</p></li> <li><p>需要在本地和服务器都要执行一边创建过程,创建过程都是一样的</p></li> <li><p>检查电脑中是否已经存在ssh key   ll -a ~/.ssh 如果现实不存在文件或文件夹则继续,否则可以跳过也可以重新生成一次(会覆盖掉以前的ssh key文件)</p></li></ul> <h3 id="_1-先在本地创建-ssh-key"><a href="#_1-先在本地创建-ssh-key" class="header-anchor">#</a> 1. 先在本地创建 ssh key</h3> <pre><code>    **ssh-keygen -t rsa -b 4096 -C &quot;邮箱地址&quot;**
    然后不需要输入密码,直接回车回车(**否则会很麻烦**)
    检查 cd ~ 账户下 ~/.ssh文件夹下是否多了3个文件
      ~/.ssh/id_rsa             私钥
      ~/.ssh/id_rsa.pub     	公钥
      ~/.ssh/know_hosts    主机记录,第一次登陆之后主机信息,当你敲yes之后会被记录到这个文件
</code></pre> <p><img src="/assets/img/ssh_show.c7ab0c20.png" alt="image"></p> <h3 id="_2-将ssh-key-加入代理"><a href="#_2-将ssh-key-加入代理" class="header-anchor">#</a> 2. 将ssh key 加入代理</h3> <pre><code>    eval $(ssh-agent -s)     启动 ssh-agent
    ssh-add ~/.ssh/id_rsa  将私钥加入代理中
</code></pre> <h3 id="_3-将公钥添加到github上"><a href="#_3-将公钥添加到github上" class="header-anchor">#</a> 3. 将公钥添加到github上</h3> <pre><code>         使用 cat ~/.ssh/id_rsa.pub   查看并复制公钥
        登陆你的github账户&gt;头像下找到setttings &gt; SSH &gt;粘贴
</code></pre> <h3 id="_4-测试下是否配置成功"><a href="#_4-测试下是否配置成功" class="header-anchor">#</a> 4. 测试下是否配置成功</h3> <pre><code>    ssh -T git@github.com
    
    好了已经打通了,本地与GitHub之间的无密码登录了
</code></pre> <blockquote><h3 id="服务器上的操作和本地一样-在子账号下使用如下命令-不要在root账户下操作"><a href="#服务器上的操作和本地一样-在子账号下使用如下命令-不要在root账户下操作" class="header-anchor">#</a> <strong>服务器上的操作和本地一样,在子账号下使用如下命令,不要在root账户下操作</strong></h3></blockquote> <p><img src="/assets/img/server-ls.d7e07573.jpg" alt="image"></p> <ol><li><p>最关键的一步就是需要在服务器上新建一个填写public key的文件
vim ~/.ssh/authorized_keys</p> <pre><code> 对vim使用不熟悉的同学可以自行搜索
</code></pre></li> <li><p>然后使用
cat ~/.ssh/id_rsa.pub 复制本地的public key 粘贴进去</p></li></ol> <blockquote><p>在操作的过程中可以多开几个git Bash 链接到服务器以防自己操作失误又顺手关闭,导致自己都进不去自己的服务器</p></blockquote> <h3 id="打通服务器与github上的ssh-key的链接"><a href="#打通服务器与github上的ssh-key的链接" class="header-anchor">#</a> 打通服务器与github上的ssh key的链接</h3> <ol><li><p>在服务器上执行 cat ~/.ssh/id_rsa.pub</p></li> <li><p>复制key粘贴到 你的github账户&gt;头像下找到setttings &gt; SSH &gt;新建key&gt;粘贴</p></li> <li><p>测试是否能用</p> <pre><code>  mkdir ~/test 
  cd test
  git clone 任意仓库的ssh地址,是ssh地址
</code></pre></li></ol> <p><img src="/assets/img/github_ssh.f218bfc8.jpg" alt="img"></p> <ol start="4"><li>测试本地到服务器的链接
ssh userName@xxxx.xxx.xxx.xxx</li></ol> <p>恭喜你,你已经完成了 local &lt;==&gt;yourserver &lt;==&gt; you github 三者 ssh key 的互通</p> <h2 id="接下来就是配置node-pm2-了"><a href="#接下来就是配置node-pm2-了" class="header-anchor">#</a> <strong>接下来就是配置node pm2 了</strong></h2> <pre><code>    我假设你的本地电脑和服务器的node,pm2 已经安装完成并能正常运行
</code></pre> <ol><li>在本地和github新建一个项目并设置好,本地项目与github的映射</li> <li>在本地github项目根文件夹下</li> <li>new一个ecosystem.json文件</li></ol> <p><img src="/assets/img/ecosystem.1b2642ec.jpg" alt="image"></p> <div class="language-json5 extra-class"><pre class="language-json5"><code>            <span class="token punctuation">{</span>
        <span class="token property">&quot;apps&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Website&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 项目名称</span>
                <span class="token property">&quot;script&quot;</span><span class="token operator">:</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 入口文件</span>
                <span class="token property">&quot;env&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token property">&quot;COMMON_VARIABLE&quot;</span><span class="token operator">:</span> <span class="token string">&quot;true&quot;</span> 
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;env_production&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;NODE_ENV&quot;</span><span class="token operator">:</span> <span class="token string">&quot;production&quot;</span>
                  <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;deploy&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token property">&quot;production&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token property">&quot;user&quot;</span><span class="token operator">:</span><span class="token string">&quot;userName&quot;</span><span class="token punctuation">,</span>       <span class="token comment">// 服务器登录用户名</span>
                <span class="token property">&quot;host&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;120.xxx.xxx.xxx&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//服务器ip</span>
                <span class="token property">&quot;port&quot;</span><span class="token operator">:</span><span class="token string">&quot;22&quot;</span><span class="token punctuation">,</span>           <span class="token comment">//ssh 端口如果没改过为 22          </span>
                <span class="token property">&quot;ref&quot;</span><span class="token operator">:</span><span class="token string">&quot;origin/master&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;repo&quot;</span><span class="token operator">:</span><span class="token string">&quot;git@github.com:macheng2017/study.git&quot;</span><span class="token punctuation">,</span> <span class="token comment">//git仓库 项目ssh地址</span>
                <span class="token property">&quot;path&quot;</span><span class="token operator">:</span><span class="token string">&quot;/www/website/production&quot;</span><span class="token punctuation">,</span><span class="token comment">//服务器部署地址 需要事先在服务器上将/www/website/ 新建出来</span>
                <span class="token property">&quot;ssh_options&quot;</span><span class="token operator">:</span><span class="token string">&quot;StrictHostKeyChecking=no&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;env&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token property">&quot;NODE_ENV&quot;</span><span class="token operator">:</span><span class="token string">&quot;production&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>以上面为模板,将加注释部分修改为自己的参数</li> <li>在服务器上新建<br>
sudo mkdir  /www/
sudo mkdir /www/website/</li></ol> <blockquote><p>NOTE:</p> <ol><li>由于不是在用户自己的home文件夹中新建文件所以需要sudo 提升权限</li> <li>这里有个坑等你们踩过之后再说</li></ol></blockquote> <ol start="6"><li>测试,新建app.js 我们就以node.js官网上的示例</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">const</span> hostname <span class="token operator">=</span> <span class="token string">&quot;0.0.0.0&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">;</span>
    
    <span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
      res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;text/plain&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'Hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> hostname<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Server running at http://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hostname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="6"><li><p>使用</p> <pre><code> pm2 deploy ecosystem.json production setup // 第一次部署
 //在本地执行脚本会在服务器中
 pm2 deploy ecosystem.json production  运行
</code></pre></li></ol> <blockquote><p>在跟着该教程做下去会有几个坑</p> <ol><li>在第一次部署的时候,会遇到权限问题,还是因为使用的是子账号新建的 /www/website/<br>
权限不够 使用 chmod 777 website 修改权限即可</li></ol></blockquote> <blockquote><p>参考:</p> <ul><li><a href="https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh" target="_blank" rel="noopener noreferrer">Connecting to GitHub with SSH - GitHub Help<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://pm2.keymetrics.io/docs/usage/deployment/" target="_blank" rel="noopener noreferrer">PM2 - Deployment<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></blockquote></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/macheng2017/article/edit/master/docs/pm2/pm2-deploy.md" target="_blank" rel="noopener noreferrer">帮我改善此文章</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">1/30/2020, 10:48:19 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/book/山川异域,风月同天.html" class="prev">“山川异域，风月同天”是什么意思？</a></span> <span class="next"><a href="/vue/vuex学习笔记.html">vuex学习笔记</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a9ab212a.js" defer></script><script src="/assets/js/2.4514bd47.js" defer></script><script src="/assets/js/4.e0a7a5e6.js" defer></script>
  </body>
</html>
