<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>遇到的问题记录: | 马成的日志</title>
    <meta name="description" content="马成的日志">
    
    
    <link rel="preload" href="/assets/css/0.styles.3edbc46a.css" as="style"><link rel="preload" href="/assets/js/app.a9ab212a.js" as="script"><link rel="preload" href="/assets/js/2.4514bd47.js" as="script"><link rel="preload" href="/assets/js/39.4505410f.js" as="script"><link rel="prefetch" href="/assets/js/10.6dedf7e5.js"><link rel="prefetch" href="/assets/js/11.45516bfc.js"><link rel="prefetch" href="/assets/js/12.11bce665.js"><link rel="prefetch" href="/assets/js/13.4449a1d2.js"><link rel="prefetch" href="/assets/js/14.b4c9bd9c.js"><link rel="prefetch" href="/assets/js/15.f619b43f.js"><link rel="prefetch" href="/assets/js/16.22cce3cf.js"><link rel="prefetch" href="/assets/js/17.e85694af.js"><link rel="prefetch" href="/assets/js/18.d16027c1.js"><link rel="prefetch" href="/assets/js/19.7fe78433.js"><link rel="prefetch" href="/assets/js/20.4931d07d.js"><link rel="prefetch" href="/assets/js/21.94bf61f1.js"><link rel="prefetch" href="/assets/js/22.35704660.js"><link rel="prefetch" href="/assets/js/23.f1ed7643.js"><link rel="prefetch" href="/assets/js/24.ff2801e8.js"><link rel="prefetch" href="/assets/js/25.c3d801cc.js"><link rel="prefetch" href="/assets/js/26.a3e6d133.js"><link rel="prefetch" href="/assets/js/27.432939de.js"><link rel="prefetch" href="/assets/js/28.f1460489.js"><link rel="prefetch" href="/assets/js/29.4eb2a704.js"><link rel="prefetch" href="/assets/js/3.bcd1ae82.js"><link rel="prefetch" href="/assets/js/30.b04eb895.js"><link rel="prefetch" href="/assets/js/31.93bfa56a.js"><link rel="prefetch" href="/assets/js/32.5cb6ba10.js"><link rel="prefetch" href="/assets/js/33.ae16d7ba.js"><link rel="prefetch" href="/assets/js/34.aaa226d3.js"><link rel="prefetch" href="/assets/js/35.c863814a.js"><link rel="prefetch" href="/assets/js/36.35ae20fd.js"><link rel="prefetch" href="/assets/js/37.a7da877f.js"><link rel="prefetch" href="/assets/js/38.52e05500.js"><link rel="prefetch" href="/assets/js/4.e0a7a5e6.js"><link rel="prefetch" href="/assets/js/40.fb917143.js"><link rel="prefetch" href="/assets/js/41.5ec83de9.js"><link rel="prefetch" href="/assets/js/42.725572dd.js"><link rel="prefetch" href="/assets/js/43.d061c26d.js"><link rel="prefetch" href="/assets/js/44.df45f429.js"><link rel="prefetch" href="/assets/js/45.73541408.js"><link rel="prefetch" href="/assets/js/46.cf5996d0.js"><link rel="prefetch" href="/assets/js/5.63a71454.js"><link rel="prefetch" href="/assets/js/6.aa81e586.js"><link rel="prefetch" href="/assets/js/7.c158ba09.js"><link rel="prefetch" href="/assets/js/8.3639371a.js"><link rel="prefetch" href="/assets/js/9.b3d6674c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3edbc46a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">马成的日志</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div> <a href="https://github.com/macheng2017/article" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div> <a href="https://github.com/macheng2017/article" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>一些闪念</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>每日定投(TheDailyRegularInvesting)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/conf.html" class="sidebar-link">ssh链接的心跳检测</a></li><li><a href="/js/es6.html" class="sidebar-link">解构(Destructing)</a></li><li><a href="/js/js和java.html" class="sidebar-link">js与java对比</a></li><li><a href="/js/qa.html" class="active sidebar-link">遇到的问题记录:</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/qa.html#el-cascader动态加载" class="sidebar-link">el-cascader动态加载</a></li><li class="sidebar-sub-header"><a href="/js/qa.html#怎样在webstorm中快速打出console-log" class="sidebar-link">怎样在webstorm中快速打出console.log</a></li><li class="sidebar-sub-header"><a href="/js/qa.html#el-cascader-动态加载问题" class="sidebar-link">el-cascader 动态加载问题</a></li><li class="sidebar-sub-header"><a href="/js/qa.html#element-ui-validate这个方法写成async-方式的时候-true会返会有返回值-false的时候-会抛出一个异常" class="sidebar-link">element ui validate这个方法写成async 方式的时候 true会返会有返回值,false的时候,会抛出一个异常</a></li><li class="sidebar-sub-header"><a href="/js/qa.html#动态表单问题" class="sidebar-link">动态表单问题</a></li><li class="sidebar-sub-header"><a href="/js/qa.html#使用选项卡的时候有几个问题" class="sidebar-link">使用选项卡的时候有几个问题:</a></li><li class="sidebar-sub-header"><a href="/js/qa.html#vuex-中只保留各个组件中公共数据" class="sidebar-link">vuex 中只保留各个组件中公共数据</a></li></ul></li><li><a href="/js/函数式编程.html" class="sidebar-link">函数式编程</a></li><li><a href="/js/开发日志.html" class="sidebar-link">/js/开发日志.html</a></li><li><a href="/js/浅拷贝深拷贝.html" class="sidebar-link">深拷贝浅拷贝</a></li><li><a href="/js/高频小套路.html" class="sidebar-link">常用代码片段</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>读书笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>pm2部署</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue学习笔记</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="遇到的问题记录"><a href="#遇到的问题记录" class="header-anchor">#</a> 遇到的问题记录:</h1> <ol><li><p>async await 的写法会不会造成线程阻塞?</p> <blockquote><p>搜索关键词 async await 阻塞</p></blockquote></li></ol> <p><a href="https://cnodejs.org/topic/57d289dcdd64a7dd387f387e" target="_blank" rel="noopener noreferrer">请问async await需要等到返回结果后才能向下执行，这是不是违背了node异步非阻塞io的模式呢？ - CNode技术社区<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h1 id="记录一次mongodb的问题"><a href="#记录一次mongodb的问题" class="header-anchor">#</a> 记录一次mongodb的问题</h1> <p>事情是这样的今天做了一个含有表单的选项卡,在提交数据的时候总是在第二次提交的时候才是当前表单中的数据,
才开始想有几种可能</p> <ol><li>可能是用了vuex导致了数据没有及时的提交到state中 解决方法就是在提交数据之前先commit到state中,结果不行</li> <li>可能是虽然提交到了state中,但是方法可能是不同步的导致了拿到的还是原来的数据 解决方式是,写成同步的</li> <li>最后反复折腾,最后突然想到了可能是mongdb 中findByIdAndUpdate返回的就是查询出来的值,即修改之前的值</li></ol> <p>最后查询了文档果然就是这个问题,
<a href="https://mongoosejs.com/docs/api.html#model_Model.findByIdAndUpdate" target="_blank" rel="noopener noreferrer">Mongoose v5.8.11: API docs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <pre><code>Returns:
«Query»
Issues a mongodb findAndModify update command by a document's _id field. findByIdAndUpdate(id, ...) is equivalent to findOneAndUpdate({ _id: id }, ...).

Finds a matching document, updates it according to the update arg, passing any options, and returns the found document (if any) to the callback. The query executes if callback is passed.

This function triggers the following middleware.

findOneAndUpdate()
</code></pre> <p>为了防止以后再出现类似问题总结如下:</p> <ol><li>看数据是否入库,直接查询数据库即可,不用再看http的 response,有可能返回的是修改之前,删除之前的值</li></ol> <p><a href="https://github.com/macheng2017/crm-zbx-admin/commit/8998f3f11c30239216b3cbac0aba3768cda29d28" target="_blank" rel="noopener noreferrer">refactor:修复了detail的动态组件错误,以及重构了baseInfo的提交逻辑 · macheng2017/crm-zbx-admin@8998f3f<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="el-cascader动态加载"><a href="#el-cascader动态加载" class="header-anchor">#</a> el-cascader动态加载</h2> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-cascader</span> <span class="token attr-name">:props</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>props<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-cascader</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这个问题比较复杂,2020/2/5几乎是花了一下午时间都没搞定,晚上痛不欲生,茶不思饭不想的,老是惦记着这个事,
想起来晚上慢慢拆解,还记得我总结出来的技巧吗?</p> <ol><li>拆解</li> <li>放慢速度</li> <li>一小步一小步做试验</li> <li>记录下自己的思考过程</li></ol> <h4 id="拆解思路"><a href="#拆解思路" class="header-anchor">#</a> 拆解思路</h4> <ol><li>首先确定一个问题就是,既然动态加载看不懂,先看下固定列表的数据结构是怎样的?</li> <li>动态和静态的数据结构应该是大同小异的</li> <li></li></ol> <h4 id="做试验-2020-2-5-22-19-第一次试验"><a href="#做试验-2020-2-5-22-19-第一次试验" class="header-anchor">#</a> 做试验 2020/2/5 22:19 第一次试验</h4> <ol><li>搭建实验环境</li> <li>把静态列表放入data中弄清楚其中的列表选项的数据结构</li> <li>边运行边修改</li></ol> <p><a href="https://www.mkboke.com/note-book/146/" target="_blank" rel="noopener noreferrer">element el-cascader 动态加载次级选项，防止重复加载，异步请求三级数据 – MKBOKE<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://juejin.im/post/5bd90f67e51d452ef37d4541" target="_blank" rel="noopener noreferrer">element UI Cascader 级联选择器 动态加载次级选项 - 掘金<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://cn.vuejs.org/v2/guide/list.html#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" target="_blank" rel="noopener noreferrer">列表渲染 — Vue.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://www.jianshu.com/p/91a409bc59f2" target="_blank" rel="noopener noreferrer">如何使用外部函数动态加载elememtUI的级联选择器 - 简书<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://www.geek-share.com/detail/2769427712.html" target="_blank" rel="noopener noreferrer">el-cascader级联组件动态加载数据允许选择任意一级的选项 - 极客分享<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="怎样在webstorm中快速打出console-log"><a href="#怎样在webstorm中快速打出console-log" class="header-anchor">#</a> 怎样在webstorm中快速打出console.log</h2> <pre><code>Yes it does,

&lt;anything&gt;.log and press Tab key. This will result in console.log(&lt;anything&gt;);

ie,

&lt;anything&gt;.log + Tab =&gt; console.log(&lt;anything&gt;);

eg1: variable

let my_var = 'Hello, World!';
my_var.log + Tab =&gt; console.log(my_var);
eg2: string

'hello'.log + Tab =&gt; console.log('hello');
eg3: string and variable

'hello', my_var.log + Tab =&gt; console.log('hello', my_var);
</code></pre> <p><a href="https://stackoverflow.com/questions/32960725/does-webstorm-have-some-shortcut-for-console-log-or-console-info" target="_blank" rel="noopener noreferrer">does webstorm have some shortcut for console.log or console.info - Stack Overflow<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="el-cascader-动态加载问题"><a href="#el-cascader-动态加载问题" class="header-anchor">#</a> el-cascader 动态加载问题</h2> <p>遇到了一个问题:</p> <h2 id="element-ui-validate这个方法写成async-方式的时候-true会返会有返回值-false的时候-会抛出一个异常"><a href="#element-ui-validate这个方法写成async-方式的时候-true会返会有返回值-false的时候-会抛出一个异常" class="header-anchor">#</a> element ui validate这个方法写成async 方式的时候 true会返会有返回值,false的时候,会抛出一个异常</h2> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code> <span class="token keyword">try</span> <span class="token punctuation">{</span>
     <span class="token comment">// validate这个方法写成async 方式的时候 true会返会有返回值,false的时候,会抛出一个异常</span>
     <span class="token comment">// 需要用try catch接住</span>
     <span class="token keyword">const</span> valid <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>baseInfo<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'valid'</span><span class="token punctuation">,</span> valid<span class="token punctuation">)</span>
     <span class="token comment">// 校验通过则提交到store</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
     <span class="token comment">//...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// vuex state 中</span>
 items<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 项目</span>
<span class="token comment">// ...</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>项目:<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-select</span>
  <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>baseInfo.items<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>请选择<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">multiple</span>
<span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-option</span>
    <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item in itemList<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.value<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.label<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.value<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// vuex state 中</span>
 items<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 项目</span>
<span class="token comment">// ...</span>
vue<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>esm<span class="token punctuation">.</span>js<span class="token operator">:</span><span class="token number">619</span> <span class="token punctuation">[</span>Vue warn<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token operator">&lt;</span>transition<span class="token operator">-</span>group<span class="token operator">&gt;</span> children must be keyed<span class="token operator">:</span> <span class="token operator">&lt;</span>ElTag<span class="token operator">&gt;</span>
<span class="token comment">// 如果 Select 的绑定值为对象类型，请务必指定 value-key 作为它的唯一性标识。</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>
</code></pre></div><p><a href="https://element.eleme.cn/#/zh-CN/component/select#chuang-jian-tiao-mu" target="_blank" rel="noopener noreferrer">组件 | Element<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="动态表单问题"><a href="#动态表单问题" class="header-anchor">#</a> 动态表单问题</h2> <p>参考:</p> <blockquote><p><a href="https://element.eleme.cn/#/zh-CN/component/form#dong-tai-zeng-jian-biao-dan-xiang" target="_blank" rel="noopener noreferrer">组件 | Element<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://blog.csdn.net/m0_37036014/article/details/84104903" target="_blank" rel="noopener noreferrer">Vue+Element动态生成新表单并添加验证_m0_37036014的博客-CSDN博客<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>折腾了几个小时,才想起来vuex只能在vue的环境中使用,普通的js文件是不能识别$store</p> <h2 id="使用选项卡的时候有几个问题"><a href="#使用选项卡的时候有几个问题" class="header-anchor">#</a> 使用选项卡的时候有几个问题:</h2> <p>使用vuex保存选项卡中的所有数据有几个弊端:</p> <ol><li>数据edit表单回显的时候,会有数据残留具体表现是这样的
<ul><li>比如a表单中总共有10项单只填写了3项,然后从list中再打开b表单,其中填写了2项,由于a,b表单中公用了vuex的数据a的表单项会交叉干扰b的表单项</li> <li>这时候如果修改了表单b中的表单项,也会干扰到打开的表单a</li> <li>如果去点击创建新表单时,数据也会残留,必须先清除数据</li></ul></li> <li></li></ol> <p>如果让tab自己保存自己的数据,只把回显的数据放到vuex当中,这样只是从vuex读取数据,不用写入数据就不会产生其他的副作用</p> <h2 id="vuex-中只保留各个组件中公共数据"><a href="#vuex-中只保留各个组件中公共数据" class="header-anchor">#</a> vuex 中只保留各个组件中公共数据</h2> <ul><li>id,用于判断是创建还是更新</li> <li>回显数据,因为回显数据是根据id一次性都查询出来的</li> <li>提交数据的通用函数</li></ul> <p>feat:完成person回显功能,发现一个问题,刚刚修改的内容必须第二次从list中点击才能看到结果
而且只能在
问题好像解决了,引起问题的原因是,父子组件的生命周期的问题,父组件设置为created,子组件设置为mounted之后问题消失</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/macheng2017/article/edit/master/docs/js/qa.md" target="_blank" rel="noopener noreferrer">帮我改善此文章</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">2/29/2020, 10:39:05 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/js/js和java.html" class="prev">js与java对比</a></span> <span class="next"><a href="/js/函数式编程.html">函数式编程</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a9ab212a.js" defer></script><script src="/assets/js/2.4514bd47.js" defer></script><script src="/assets/js/39.4505410f.js" defer></script>
  </body>
</html>
