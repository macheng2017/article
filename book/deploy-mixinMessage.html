<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>部署mixin Message 大群笔记 | 马成的日志</title>
    <meta name="description" content="马成的日志">
    
    
    <link rel="preload" href="/assets/css/0.styles.3edbc46a.css" as="style"><link rel="preload" href="/assets/js/app.a9ab212a.js" as="script"><link rel="preload" href="/assets/js/2.4514bd47.js" as="script"><link rel="preload" href="/assets/js/6.aa81e586.js" as="script"><link rel="prefetch" href="/assets/js/10.6dedf7e5.js"><link rel="prefetch" href="/assets/js/11.45516bfc.js"><link rel="prefetch" href="/assets/js/12.11bce665.js"><link rel="prefetch" href="/assets/js/13.4449a1d2.js"><link rel="prefetch" href="/assets/js/14.b4c9bd9c.js"><link rel="prefetch" href="/assets/js/15.f619b43f.js"><link rel="prefetch" href="/assets/js/16.22cce3cf.js"><link rel="prefetch" href="/assets/js/17.e85694af.js"><link rel="prefetch" href="/assets/js/18.d16027c1.js"><link rel="prefetch" href="/assets/js/19.7fe78433.js"><link rel="prefetch" href="/assets/js/20.4931d07d.js"><link rel="prefetch" href="/assets/js/21.94bf61f1.js"><link rel="prefetch" href="/assets/js/22.35704660.js"><link rel="prefetch" href="/assets/js/23.f1ed7643.js"><link rel="prefetch" href="/assets/js/24.ff2801e8.js"><link rel="prefetch" href="/assets/js/25.c3d801cc.js"><link rel="prefetch" href="/assets/js/26.a3e6d133.js"><link rel="prefetch" href="/assets/js/27.432939de.js"><link rel="prefetch" href="/assets/js/28.f1460489.js"><link rel="prefetch" href="/assets/js/29.4eb2a704.js"><link rel="prefetch" href="/assets/js/3.bcd1ae82.js"><link rel="prefetch" href="/assets/js/30.b04eb895.js"><link rel="prefetch" href="/assets/js/31.93bfa56a.js"><link rel="prefetch" href="/assets/js/32.5cb6ba10.js"><link rel="prefetch" href="/assets/js/33.ae16d7ba.js"><link rel="prefetch" href="/assets/js/34.aaa226d3.js"><link rel="prefetch" href="/assets/js/35.c863814a.js"><link rel="prefetch" href="/assets/js/36.35ae20fd.js"><link rel="prefetch" href="/assets/js/37.a7da877f.js"><link rel="prefetch" href="/assets/js/38.52e05500.js"><link rel="prefetch" href="/assets/js/39.4505410f.js"><link rel="prefetch" href="/assets/js/4.e0a7a5e6.js"><link rel="prefetch" href="/assets/js/40.fb917143.js"><link rel="prefetch" href="/assets/js/41.5ec83de9.js"><link rel="prefetch" href="/assets/js/42.725572dd.js"><link rel="prefetch" href="/assets/js/43.d061c26d.js"><link rel="prefetch" href="/assets/js/44.df45f429.js"><link rel="prefetch" href="/assets/js/45.73541408.js"><link rel="prefetch" href="/assets/js/46.cf5996d0.js"><link rel="prefetch" href="/assets/js/5.63a71454.js"><link rel="prefetch" href="/assets/js/7.c158ba09.js"><link rel="prefetch" href="/assets/js/8.3639371a.js"><link rel="prefetch" href="/assets/js/9.b3d6674c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3edbc46a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">马成的日志</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div> <a href="https://github.com/macheng2017/article" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div> <a href="https://github.com/macheng2017/article" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>一些闪念</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>每日定投(TheDailyRegularInvesting)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>读书笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/book/2019年3月18日 fork过来的仓库同步更简单方法.html" class="sidebar-link">2019年3月18日 fork过来的仓库同步更简单方法</a></li><li><a href="/book/MongoDB.html" class="sidebar-link">MongoDB数据库添加密码</a></li><li><a href="/book/coder.html" class="sidebar-link">程序员的思维修炼</a></li><li><a href="/book/deploy-mixinMessage.html" class="active sidebar-link">部署mixin Message 大群笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/book/deploy-mixinMessage.html#使用ip-端口号配置" class="sidebar-link">使用ip + 端口号配置</a></li></ul></li><li><a href="/book/docker.html" class="sidebar-link">学习使用docker-compose</a></li><li><a href="/book/go.html" class="sidebar-link">go语言读书笔记</a></li><li><a href="/book/lixiaolai.html" class="sidebar-link">/book/lixiaolai.html</a></li><li><a href="/book/logcic.html" class="sidebar-link">真相</a></li><li><a href="/book/springboot.html" class="sidebar-link">/book/springboot.html</a></li><li><a href="/book/vim.html" class="sidebar-link">vim的基本操作</a></li><li><a href="/book/web.html" class="sidebar-link">web</a></li><li><a href="/book/山川异域,风月同天.html" class="sidebar-link">“山川异域，风月同天”是什么意思？</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>pm2部署</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue学习笔记</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="部署mixin-message-大群笔记"><a href="#部署mixin-message-大群笔记" class="header-anchor">#</a> 部署mixin Message 大群笔记</h1> <p>使用scp命令传送文件到linux服务器
scp zcvf key.tar.gz root@xxxxx:/etc/nginx/conf.d/</p> <h4 id="打包"><a href="#打包" class="header-anchor">#</a> 打包</h4> <p>tar -zcvf ../db.tar.gz ./</p> <h4 id="上传"><a href="#上传" class="header-anchor">#</a> 上传</h4> <p>scp zcvf db.tar.gz root@xxxxx:/home/xxx</p> <h4 id="解压"><a href="#解压" class="header-anchor">#</a> 解压</h4> <p>tar xvf db.tar.gz</p> <p>今天部署了go写的一个web应用到linux服务器上,和javaWeb需要Apache Tomcat node.js需要pm2 不同的是,
go编译通过之后,直接文件名就可以运行,这也太爽了</p> <h4 id="在部署的过程中出现了几个问题"><a href="#在部署的过程中出现了几个问题" class="header-anchor">#</a> 在部署的过程中出现了几个问题:</h4> <ol><li><p>window的换行符和linux下的换行符不一样 window下使用\n\r linux只用\r</p> <p><a href="https://segmentfault.com/a/1190000010605053?utm_source=tag-newest" target="_blank" rel="noopener noreferrer">vim下处理文档中的\r\n\t字符 - 问题与解决 - SegmentFault 思否<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p>go build 解决国内无法拉取依赖的问题
go env -w GOPROXY=https://goproxy.cn,direct</p></li> <li><p>不熟悉postgreSQL在执行sql语句完成的状态 '=&gt;' 与 '-&gt;' 的时候忘了加';'而导致执行失败之后状态不一样都没注意到</p></li></ol> <h3 id="记录下使用到的命令"><a href="#记录下使用到的命令" class="header-anchor">#</a> 记录下使用到的命令</h3> <ul><li>systemd</li> <li>journalctl 查看日志</li> <li>netstat -langput | grep LISTEN 查看端口</li> <li></li></ul> <p>从昨天一直在尝试,询问了相关开发人员后,得到的回复是host应该是一个url而不是api那么这个host到底是哪里配置的,只能是config.yaml中配置的,更改host配置后点击之后一直返回一条json信息</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span><span class="token property">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;build&quot;</span><span class="token operator">:</span><span class="token string">&quot;BUILD_VERSION-go1.13.8&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;developers&quot;</span><span class="token operator">:</span><span class="token string">&quot;https://developers.mixin.one&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p>直到今天,才发现需要重新从对话中返回一个新的按钮,才能生效,而这里到一个链接<br>
这个链接据猜测应该是一个授权或者付款页面,点击按钮后,并返回son对象</p> <p>使用浏览器调试group.test.com</p> <h3 id="linux-常用命令"><a href="#linux-常用命令" class="header-anchor">#</a> linux 常用命令</h3> <p>数据库报错了需要查询日志文件,但是不知道文件存在哪个位置用到了locate这个命令</p> <p>whereis 和 locate 是用来查找文件的</p> <p>which 和 type 是查找命令的</p> <p><a href="https://blog.exin.one/2019/05/25/mixin-super-group/" target="_blank" rel="noopener noreferrer">Mixin 大群部署完全教程 – Exin 团队博客<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="postgresql-基本操作"><a href="#postgresql-基本操作" class="header-anchor">#</a> postgresql 基本操作</h3> <p>postgres是在linux安装postgreSQL 自动创建的一个Superuser下图说明了一些Superuser的一些权限</p> <p><img src="data:image/png;base64,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" alt="img"></p> <ul><li>\? help</li> <li>\l show databases</li> <li>\dt show tables</li> <li>\d 与\dt区别是什么？</li> <li>\c dbname 切换到新数据库</li> <li>\c show current DB name and user</li> <li>\conninfo 显示客户端的连接信息</li> <li>\d table_name describ table</li> <li>\du list all roles</li></ul> <h3 id="metacognition"><a href="#metacognition" class="header-anchor">#</a> metacognition</h3> <ol><li>mixin大群本身就是一个机器人,可以学习机器人的写法,使用的是go语言,是通过阅读源码提升自己很好的一个案例</li></ol> <h3 id="finished"><a href="#finished" class="header-anchor">#</a> finished</h3> <ol><li>部署完成mixin大群</li> <li>并找到了一个bug,并通知相关人员修复</li></ol> <h3 id="difficulty"><a href="#difficulty" class="header-anchor">#</a> difficulty</h3> <p>go语法不太熟悉</p> <h3 id="review"><a href="#review" class="header-anchor">#</a> review</h3> <p>回顾了一些linux的操作命令</p> <h3 id="view"><a href="#view" class="header-anchor">#</a> view</h3> <p>postgreSQL的基本知识</p> <h3 id="preview"><a href="#preview" class="header-anchor">#</a> preview</h3> <p>慢慢回顾go语言基本语法</p> <h2 id="使用ip-端口号配置"><a href="#使用ip-端口号配置" class="header-anchor">#</a> 使用ip + 端口号配置</h2> <div class="language-yaml extra-class"><pre class="language-yaml"><code>server <span class="token punctuation">{</span>
    <span class="token comment"># listen 443 ssl http2;</span>
    listen 80;
    <span class="token comment">#server_name group.test.com;</span>
    server_name 1xx.1xxx.1xxx.xxx;
    <span class="token comment"># ssl on;</span>
    <span class="token comment"># ssl_certificate /etc/nginx/conf.d/cert/group.test.com_bundle.crt;</span>
    <span class="token comment"># ssl_certificate_key /etc/nginx/conf.d/cert/group.test.com.key;</span>
    <span class="token comment"># ssl_session_timeout 5m;</span>
    <span class="token comment"># ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span>
    <span class="token comment"># ssl_ciphers xxxxxxxx;</span>
    <span class="token comment"># ssl_prefer_server_ciphers on;</span>

    root /var/www/test/dist;
    index index.html index.htm;
    charset utf<span class="token punctuation">-</span>8;

    gzip            on;
    gzip_comp_level 5;
    gzip_min_length 256;
    gzip_proxied    any;
    gzip_types
      application/atom+xml
      application/javascript
      application/json
      application/ld+json
      application/manifest+json
      application/rss+xml
      application/vnd.geo+json
      application/vnd.ms<span class="token punctuation">-</span>fontobject
      application/x<span class="token punctuation">-</span>font<span class="token punctuation">-</span>ttf
      application/x<span class="token punctuation">-</span>web<span class="token punctuation">-</span>app<span class="token punctuation">-</span>manifest+json
      application/xhtml+xml
      application/xml
      font/opentype
      image/bmp
      image/svg+xml
      image/x<span class="token punctuation">-</span>icon
      text/cache<span class="token punctuation">-</span>manifest
      text/css
      text/plain
      text/vcard
      text/vnd.rim.location.xloc
      text/vtt
      text/x<span class="token punctuation">-</span>component
      text/x<span class="token punctuation">-</span>cross<span class="token punctuation">-</span>domain<span class="token punctuation">-</span>policy;

    <span class="token comment"># 注意，这里有修改，前端跳转路径变了</span>
    location ~* \.(js<span class="token punctuation">|</span>css<span class="token punctuation">|</span>png<span class="token punctuation">|</span>jpg<span class="token punctuation">|</span>jpeg<span class="token punctuation">|</span>gif<span class="token punctuation">|</span>ico)$ <span class="token punctuation">{</span>
      expires max;
      try_files $uri =404;
    <span class="token punctuation">}</span>

    location / <span class="token punctuation">{</span>

        try_files /index.html =404;
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="language-yaml extra-class"><pre class="language-yaml"><code>upstream test <span class="token punctuation">{</span>
        server 127.0.0.1<span class="token punctuation">:</span>7001 fail_timeout=0;
<span class="token punctuation">}</span>

server <span class="token punctuation">{</span>
    <span class="token comment"># listen 443 ssl http2;</span>
    listen 7002;
    server_name 1xxx.1xxx.1xxx.xxxx;
    <span class="token comment"># ssl on;</span>
    <span class="token comment"># ssl_certificate /etc/nginx/conf.d/cert/api.test.com_bundle.crt;</span>
    <span class="token comment"># ssl_certificate_key /etc/nginx/conf.d/cert/api.test.com.key;</span>
    <span class="token comment"># ssl_session_timeout 5m;</span>
    <span class="token comment"># ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span>
    <span class="token comment"># ssl_ciphers xxxxxxxx;</span>
    <span class="token comment"># ssl_prefer_server_ciphers on;</span>

    index index.html index.htm;

    charset utf<span class="token punctuation">-</span>8;

    gzip            on;
    gzip_comp_level 5;
    gzip_proxied    any;
    gzip_types      *;

    location / <span class="token punctuation">{</span>
        proxy_set_header  X<span class="token punctuation">-</span>Real<span class="token punctuation">-</span>IP  $remote_addr;
        proxy_set_header  X<span class="token punctuation">-</span>Forwarded<span class="token punctuation">-</span>For $proxy_add_x_forwarded_for;
        proxy_set_header  X_FORWARDED_PROTO $scheme;
        proxy_set_header  Host $http_host;
        proxy_redirect    off;
        client_max_body_size 1M;

        proxy_pass http<span class="token punctuation">:</span>//test;
        <span class="token punctuation">}</span>

 <span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/macheng2017/article/edit/master/docs/book/deploy-mixinMessage.md" target="_blank" rel="noopener noreferrer">帮我改善此文章</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">3/4/2020, 7:37:16 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/book/coder.html" class="prev">程序员的思维修炼</a></span> <span class="next"><a href="/book/docker.html">学习使用docker-compose</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a9ab212a.js" defer></script><script src="/assets/js/2.4514bd47.js" defer></script><script src="/assets/js/6.aa81e586.js" defer></script>
  </body>
</html>
