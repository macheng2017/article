(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{210:function(t,s,a){t.exports=a.p+"assets/img/ssh_show.c7ab0c20.png"},211:function(t,s,a){t.exports=a.p+"assets/img/server-ls.d7e07573.jpg"},212:function(t,s,a){t.exports=a.p+"assets/img/github_ssh.f218bfc8.jpg"},213:function(t,s,a){t.exports=a.p+"assets/img/ecosystem.1b2642ec.jpg"},255:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"pm2部署笔记"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pm2部署笔记"}},[t._v("#")]),t._v(" pm2部署笔记")]),t._v(" "),n("blockquote",[n("blockquote",[n("p",[t._v("为什么要用pm2?")])])]),t._v(" "),n("h2",{attrs:{id:"以前部署项目的方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#以前部署项目的方式"}},[t._v("#")]),t._v(" 以前部署项目的方式")]),t._v(" "),n("blockquote",[n("ol",[n("li",[n("p",[t._v("从github上下载")])]),t._v(" "),n("li",[n("p",[t._v("打包后通过ssh 或者FTP上传到服务器,")])]),t._v(" "),n("li",[n("p",[t._v("在服务器上找到并解压缩,放到相应的文件夹")])]),t._v(" "),n("li",[n("p",[t._v("使用npm install 安装依赖 以及编译css 压缩js文件等等")])]),t._v(" "),n("li",[n("p",[t._v("删除压缩包以及设置文件夹权限")])]),t._v(" "),n("li",[n("p",[t._v("运行项目,如果报错")])]),t._v(" "),n("li",[n("p",[t._v("切换文件夹查看日志文件")])]),t._v(" "),n("li",[n("p",[t._v("在本地修改然后循环步骤2-7直到完美运行")]),t._v(" "),n("p",[t._v("....")])])])]),t._v(" "),n("h4",{attrs:{id:"增加一个新功能后者一行代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#增加一个新功能后者一行代码"}},[t._v("#")]),t._v(" 增加一个新功能后者一行代码")]),t._v(" "),n("blockquote",[n("pre",[n("code",[t._v("  重复1-8\n")])])]),t._v(" "),n("h2",{attrs:{id:"使用pm2以后的部署方式-当所有配置完成后三行命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用pm2以后的部署方式-当所有配置完成后三行命令"}},[t._v("#")]),t._v(" 使用pm2以后的部署方式,当所有配置完成后三行命令")]),t._v(" "),n("ol",[n("li",[t._v("git push                                                                  推送到github或者码云上")]),t._v(" "),n("li",[t._v("pm2 deploy ecosystem.json production setup     第一次从github上拉取到服务器")]),t._v(" "),n("li",[t._v("pm2 deploy ecosystem.json production               部署并运行 看到 success")]),t._v(" "),n("li",[t._v("如果报错使用pm2 logs 重复1,3")])]),t._v(" "),n("h3",{attrs:{id:"增加一个新功能后者一行代码-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#增加一个新功能后者一行代码-2"}},[t._v("#")]),t._v(" 增加一个新功能后者一行代码")]),t._v(" "),n("pre",[n("code",[t._v("1. git push \n\n   2. pm2 deploy ecosystem.json production \n")])]),t._v(" "),n("p",[t._v("看到pm2 部署你的项目是不是很幸福,以前的工作方式简直是在透支生命啊，不到可以提高幸福指数，还可以拯救生命。")]),t._v(" "),n("p",[t._v("步骤")]),t._v(" "),n("pre",[n("code",[t._v("1. 在服务器和本地创建密钥\n2. 安装node.js pm2\n3. 在github上建立仓库\n4. 使用密钥配置服务器,本地,github三者无密码登录\n5. 配置pm2 的部署配置文件\n")])]),t._v(" "),n("p",[t._v("提问提问提问")]),t._v(" "),n("pre",[n("code",[t._v("pm2最原始形态应该就是一个shell脚本，本来一个程序员2个小时就能完成的部署，他却花费20个小时研究出来一个自动化部署的脚本，然后上传到社区，参考xxx漫画\n")])]),t._v(" "),n("h3",{attrs:{id:"在本地和服务器创建密钥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#在本地和服务器创建密钥"}},[t._v("#")]),t._v(" 在本地和服务器创建密钥")]),t._v(" "),n("pre",[n("code",[t._v("note: \n")])]),t._v(" "),n("ul",[n("li",[n("p",[t._v("至于说ssh秘钥登录原理自行搜索,本文关注点在于实现步骤")])]),t._v(" "),n("li",[n("p",[t._v("需要在本地电脑和服务器上装好git Bash(Mac系统没用过,好像不用get也行,反正有个终端能执行shell就行)")])]),t._v(" "),n("li",[n("p",[t._v("需要在本地和服务器都要执行一边创建过程,创建过程都是一样的")])]),t._v(" "),n("li",[n("p",[t._v("检查电脑中是否已经存在ssh key   ll -a ~/.ssh 如果现实不存在文件或文件夹则继续,否则可以跳过也可以重新生成一次(会覆盖掉以前的ssh key文件)")])])]),t._v(" "),n("h3",{attrs:{id:"_1-先在本地创建-ssh-key"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-先在本地创建-ssh-key"}},[t._v("#")]),t._v(" 1. 先在本地创建 ssh key")]),t._v(" "),n("pre",[n("code",[t._v('    **ssh-keygen -t rsa -b 4096 -C "邮箱地址"**\n    然后不需要输入密码,直接回车回车(**否则会很麻烦**)\n    检查 cd ~ 账户下 ~/.ssh文件夹下是否多了3个文件\n      ~/.ssh/id_rsa             私钥\n      ~/.ssh/id_rsa.pub     \t公钥\n      ~/.ssh/know_hosts    主机记录,第一次登陆之后主机信息,当你敲yes之后会被记录到这个文件\n')])]),t._v(" "),n("p",[n("img",{attrs:{src:a(210),alt:"image"}})]),t._v(" "),n("h3",{attrs:{id:"_2-将ssh-key-加入代理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-将ssh-key-加入代理"}},[t._v("#")]),t._v(" 2. 将ssh key 加入代理")]),t._v(" "),n("pre",[n("code",[t._v("    eval $(ssh-agent -s)     启动 ssh-agent\n    ssh-add ~/.ssh/id_rsa  将私钥加入代理中\n")])]),t._v(" "),n("h3",{attrs:{id:"_3-将公钥添加到github上"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-将公钥添加到github上"}},[t._v("#")]),t._v(" 3. 将公钥添加到github上")]),t._v(" "),n("pre",[n("code",[t._v("         使用 cat ~/.ssh/id_rsa.pub   查看并复制公钥\n        登陆你的github账户>头像下找到setttings > SSH >粘贴\n")])]),t._v(" "),n("h3",{attrs:{id:"_4-测试下是否配置成功"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-测试下是否配置成功"}},[t._v("#")]),t._v(" 4. 测试下是否配置成功")]),t._v(" "),n("pre",[n("code",[t._v("    ssh -T git@github.com\n    \n    好了已经打通了,本地与GitHub之间的无密码登录了\n")])]),t._v(" "),n("blockquote",[n("h3",{attrs:{id:"服务器上的操作和本地一样-在子账号下使用如下命令-不要在root账户下操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#服务器上的操作和本地一样-在子账号下使用如下命令-不要在root账户下操作"}},[t._v("#")]),t._v(" "),n("strong",[t._v("服务器上的操作和本地一样,在子账号下使用如下命令,不要在root账户下操作")])])]),t._v(" "),n("p",[n("img",{attrs:{src:a(211),alt:"image"}})]),t._v(" "),n("ol",[n("li",[n("p",[t._v("最关键的一步就是需要在服务器上新建一个填写public key的文件\nvim ~/.ssh/authorized_keys")]),t._v(" "),n("pre",[n("code",[t._v(" 对vim使用不熟悉的同学可以自行搜索\n")])])]),t._v(" "),n("li",[n("p",[t._v("然后使用\ncat ~/.ssh/id_rsa.pub 复制本地的public key 粘贴进去")])])]),t._v(" "),n("blockquote",[n("p",[t._v("在操作的过程中可以多开几个git Bash 链接到服务器以防自己操作失误又顺手关闭,导致自己都进不去自己的服务器")])]),t._v(" "),n("h3",{attrs:{id:"打通服务器与github上的ssh-key的链接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#打通服务器与github上的ssh-key的链接"}},[t._v("#")]),t._v(" 打通服务器与github上的ssh key的链接")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("在服务器上执行 cat ~/.ssh/id_rsa.pub")])]),t._v(" "),n("li",[n("p",[t._v("复制key粘贴到 你的github账户>头像下找到setttings > SSH >新建key>粘贴")])]),t._v(" "),n("li",[n("p",[t._v("测试是否能用")]),t._v(" "),n("pre",[n("code",[t._v("  mkdir ~/test \n  cd test\n  git clone 任意仓库的ssh地址,是ssh地址\n")])])])]),t._v(" "),n("p",[n("img",{attrs:{src:a(212),alt:"img"}})]),t._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[t._v("测试本地到服务器的链接\nssh userName@xxxx.xxx.xxx.xxx")])]),t._v(" "),n("p",[t._v("恭喜你,你已经完成了 local <==>yourserver <==> you github 三者 ssh key 的互通")]),t._v(" "),n("h2",{attrs:{id:"接下来就是配置node-pm2-了"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#接下来就是配置node-pm2-了"}},[t._v("#")]),t._v(" "),n("strong",[t._v("接下来就是配置node pm2 了")])]),t._v(" "),n("pre",[n("code",[t._v("    我假设你的本地电脑和服务器的node,pm2 已经安装完成并能正常运行\n")])]),t._v(" "),n("ol",[n("li",[t._v("在本地和github新建一个项目并设置好,本地项目与github的映射")]),t._v(" "),n("li",[t._v("在本地github项目根文件夹下")]),t._v(" "),n("li",[t._v("new一个ecosystem.json文件")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(213),alt:"image"}})]),t._v(" "),n("div",{staticClass:"language-json5 extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json5"}},[n("code",[t._v("            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"apps"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Website"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 项目名称")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"script"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app.js"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 入口文件")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"env"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"COMMON_VARIABLE"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),t._v(" \n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"env_production"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"NODE_ENV"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"production"')]),t._v("\n                  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"deploy"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"production"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"user"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userName"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("       "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 服务器登录用户名")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"host"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"120.xxx.xxx.xxx"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//服务器ip")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"port"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"22"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("           "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ssh 端口如果没改过为 22          ")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ref"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"origin/master"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"repo"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git@github.com:macheng2017/study.git"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//git仓库 项目ssh地址")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"path"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/www/website/production"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//服务器部署地址 需要事先在服务器上将/www/website/ 新建出来")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ssh_options"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"StrictHostKeyChecking=no"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"env"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"NODE_ENV"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"production"')]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("ol",{attrs:{start:"4"}},[n("li",[t._v("以上面为模板,将加注释部分修改为自己的参数")]),t._v(" "),n("li",[t._v("在服务器上新建"),n("br"),t._v("\nsudo mkdir  /www/\nsudo mkdir /www/website/")])]),t._v(" "),n("blockquote",[n("p",[t._v("NOTE:")]),t._v(" "),n("ol",[n("li",[t._v("由于不是在用户自己的home文件夹中新建文件所以需要sudo 提升权限")]),t._v(" "),n("li",[t._v("这里有个坑等你们踩过之后再说")])])]),t._v(" "),n("ol",{attrs:{start:"6"}},[n("li",[t._v("测试,新建app.js 我们就以node.js官网上的示例")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hostname "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.0.0.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" port "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusCode "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content-Type"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/plain"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello world'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("port"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hostname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("Server running at http://")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("hostname"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("port"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("ol",{attrs:{start:"6"}},[n("li",[n("p",[t._v("使用")]),t._v(" "),n("pre",[n("code",[t._v(" pm2 deploy ecosystem.json production setup // 第一次部署\n //在本地执行脚本会在服务器中\n pm2 deploy ecosystem.json production  运行\n")])])])]),t._v(" "),n("blockquote",[n("p",[t._v("在跟着该教程做下去会有几个坑")]),t._v(" "),n("ol",[n("li",[t._v("在第一次部署的时候,会遇到权限问题,还是因为使用的是子账号新建的 /www/website/"),n("br"),t._v("\n权限不够 使用 chmod 777 website 修改权限即可")])])]),t._v(" "),n("blockquote",[n("p",[t._v("参考:")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh",target:"_blank",rel:"noopener noreferrer"}},[t._v("Connecting to GitHub with SSH - GitHub Help"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://pm2.keymetrics.io/docs/usage/deployment/",target:"_blank",rel:"noopener noreferrer"}},[t._v("PM2 - Deployment"),n("OutboundLink")],1)])])])])}),[],!1,null,null,null);s.default=e.exports}}]);